define("block_mycourse/show_more",["exports","core/ajax","core/templates","core/config","core/notification","jquery","block_mycourse/item_load"],(function(_exports,_ajax,_templates,_config,_notification,_jquery,_item_load){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_config=_interopRequireDefault(_config),_notification=_interopRequireDefault(_notification),_jquery=_interopRequireDefault(_jquery),_item_load=_interopRequireDefault(_item_load);_exports.init=function(id){(0,_jquery.default)("section").on("click","#inst"+id+" .show_more",(function(){return msmycourses_show_more((0,_jquery.default)(this),id),!1})),(0,_jquery.default)("section").on("click","#inst"+id+" .next",(function(){return msmycourses_page_shift((0,_jquery.default)(this),id),!1})),(0,_jquery.default)("section").on("click","#inst"+id+" .prev",(function(){return msmycourses_page_shift((0,_jquery.default)(this),id),!1}))};var msmycourses_show_more=function(element,id){_ajax.default.call([{methodname:"block_mycourse_show_more",args:{blockid:id,offset:element.data("current"),switch_view:0,current_view:element.data("currentview")}}])[0].done((function(response){response.slider?_jquery.default.each(response.children,(function(key,record){record.config=_config.default,record.show_favorites=response.show_favorites,record.remove_activities=response.remove_activities,record.enable_compact_view=response.enable_compact_view,_templates.default.render("block_mycourse/child_category",record).then((function(html,js){_templates.default.appendNodeContents((0,_jquery.default)("#inst"+id+" .items").children(".categories"),html,js)})).fail(_notification.default.exception)})):_jquery.default.each(response.records,(function(key,record){record.config=_config.default,record.show_favorites=response.show_favorites,record.remove_activities=response.remove_activities,_templates.default.render("block_mycourse/item",record).then((function(html,js){_templates.default.appendNodeContents("#inst"+id+" .items",html,js)})).fail(_notification.default.exception)})),response.next?_templates.default.render("block_mycourse/more",response).then((function(html,js){_templates.default.replaceNode("#inst"+id+" .show_more",html,js)})).fail(_notification.default.exception):(0,_jquery.default)("#inst"+id+" .show_more").remove(),response.show_alt_view&&_templates.default.render("block_mycourse/switch_view",response).then((function(html,js){_templates.default.replaceNode("#inst"+id+" .switch_view_wrapper",html,js)})).fail(_notification.default.exception)})).fail(_notification.default.exception)},msmycourses_page_shift=function(element,id){_ajax.default.call([{methodname:"block_mycourse_show_more",args:{blockid:id,offset:element.data("current"),prev:element.data("prev"),current_view:element.data("currentview")}}])[0].done((function(response){response.config=_config.default,_templates.default.render("block_mycourse/page",response).then((function(html,js){_templates.default.replaceNode("#inst"+id+" .msmycourses_wrapper",html,js),(0,_jquery.default)(".block_mycourse .savestate_open").each((function(){(0,_jquery.default)(this).hasClass("open")||_item_load.default.savestate_open((0,_jquery.default)(this),id,!0)}))})).fail(_notification.default.exception),response.show_alt_view&&_templates.default.render("block_mycourse/switch_view",response).then((function(html,js){_templates.default.replaceNode("#inst"+id+" .switch_view_wrapper",html,js)})).fail(_notification.default.exception),_ajax.default.call([{methodname:"block_mycourse_savestates_page",args:{blockid:id,current:response.first_element,current_view:element.data("currentview")}}])[0].done((function(){})).fail(_notification.default.exception)})).fail(_notification.default.exception)}}));

//# sourceMappingURL=show_more.min.js.map