function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}define("block_msmycourses2/switch_view",["exports","core/ajax","core/templates","core/config","core/notification","jquery","block_msmycourses2/item_load","block_msmycourses2/course_slider"],(function(_exports,_ajax,_templates,_config,_notification,_jquery,_item_load,slider){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_config=_interopRequireDefault(_config),_notification=_interopRequireDefault(_notification),_jquery=_interopRequireDefault(_jquery),_item_load=_interopRequireDefault(_item_load),slider=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(slider);_exports.init=function(id){(0,_jquery.default)("section").on("click","#inst"+id+" .switch_view",(function(){return msmycourses_switch_view((0,_jquery.default)(this),id),msmycourses_alt_view_savestate(id),!1}))};var msmycourses_switch_view=function(element,id){if("menu"==element.data("target"))var promises=_ajax.default.call([{methodname:"block_msmycourses2_load_menu_category",args:{blockid:id,current_view:element.data("currentview"),switch_view:1}}]);else promises=_ajax.default.call([{methodname:"block_msmycourses2_show_more",args:{blockid:id,offset:0,prev:0,current_view:element.data("currentview"),switch_view:1,load_savestate:1}}]);promises[0].done((function(response){var template_type;"list"==element.data("target")&&(template_type="block_msmycourses2/list"),"page"==element.data("target")&&(template_type="block_msmycourses2/page"),"menu"==element.data("target")&&(template_type="block_msmycourses2/menu"),response.slider?0==response.records.length&&0==response.children.length&&(template_type="block_msmycourses2/empty"):0==response.records.length&&(template_type="block_msmycourses2/empty"),response.config=_config.default,_templates.default.render(template_type,response).then((function(html,js){_templates.default.replaceNode("#inst"+id+" .msmycourses_wrapper",html,js);var swiper_element=document.getElementById("inst"+id).getElementsByClassName("items")[0].firstElementChild;(0,_jquery.default)(swiper_element).hasClass("swiper")&&slider.init((0,_jquery.default)(swiper_element).parent(),response.slider_config),(0,_jquery.default)(".block_msmycourses2 .savestate_open").each((function(){(0,_jquery.default)(this).hasClass("open")||_item_load.default.savestate_open((0,_jquery.default)(this),id,!0)}))})).fail(_notification.default.exception),response.next?_templates.default.render("block_msmycourses2/more",response).then((function(html,js){_templates.default.replaceNode("#inst"+id+" .show_more",html,js)})).fail(_notification.default.exception):(0,_jquery.default)("#inst"+id+" .show_more").remove()})).fail(_notification.default.exception)},msmycourses_alt_view_savestate=function(id){_ajax.default.call([{methodname:"block_msmycourses2_savestates_alt_view",args:{blockid:id}}])[0].done((function(){})).fail(_notification.default.exception)}}));

//# sourceMappingURL=switch_view.min.js.map