define("block_mycourse/collapse",["exports","core/ajax","core/notification","jquery","block_mycourse/item_load"],(function(_exports,_ajax,_notification,_jquery,_item_load){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_jquery=_interopRequireDefault(_jquery),_item_load=_interopRequireDefault(_item_load);_exports.init=function(id){(0,_jquery.default)("section").on("click","#inst"+id+".block_mycourse .collapse_item",(function(e){return item_collapse_click((0,_jquery.default)(this).parent(),id,e),!1})),(0,_jquery.default)("#inst"+id+".block_mycourse .savestate_open").each((function(){(0,_jquery.default)(this).hasClass("open")||item_collapse((0,_jquery.default)(this),id,!1,!0)}))};var item_collapse=function(item,id,resize,load_savestate){var current_view=0;return 1==(0,_jquery.default)(item).closest(".msmycourses_wrapper").find(".switch_view").data("currentview")&&(current_view=1),void 0===resize&&(resize=!0),(0,_jquery.default)(item).hasClass("open")?(item.removeClass("open"),resize&&(0,_jquery.default)(window).trigger("resize"),_ajax.default.call([{methodname:"block_mycourse_savestates_collapse",args:{blockid:id,category:(0,_jquery.default)(item).data("id"),current_view:current_view,type:"close"}}])[0].done((function(){})).fail(_notification.default.exception),!0):(item.addClass("open"),0==item.find(".children").children().length&&_item_load.default.msmycourses_item_load(item,id,load_savestate),_ajax.default.call([{methodname:"block_mycourse_savestates_collapse",args:{blockid:id,category:(0,_jquery.default)(item).data("id"),current_view:current_view,type:"open"}}])[0].done((function(){})).fail(_notification.default.exception),resize&&(0,_jquery.default)(window).trigger("resize"),!1)},item_collapse_click=function(obj,id,event){event.stopPropagation(),event.preventDefault(),item_collapse(obj,id,!1,!1)}}));

//# sourceMappingURL=collapse.min.js.map