{"version":3,"file":"menu.min.js","sources":["../src/menu.js"],"sourcesContent":["import log from 'core/log';\nimport ajax from 'core/ajax';\nimport templates from 'core/templates';\nimport config from 'core/config';\nimport notification from 'core/notification';\nimport $ from 'jquery';\n\nexport const init = (id) => {\n      $('section').on(\"click\",'#inst'+id+'.block_msmycourses2 .menu .category', function () {\n            menu_open($(this), id);\n            menu_savestate($(this),id);\n            return false;\n    });\n};\n\nconst menu_open = (item, blockid) => {\n\n                var current_view = 0;\n                var switch_view = item.closest('.msmycourses_wrapper').find('.switch_view');\n\n                if(switch_view.data('currentview') == 1) {\n                    current_view = 1;\n                }\n\n                var promises = ajax.call([\n                                {\n                                      methodname: 'block_msmycourses2_load_menu_category',\n                                      args: {\n                                              blockid: blockid,\n                                              category_id: item.data('id'),\n                                              current_view: current_view\n                                      }\n                                }\n                                ]);\n\n                                promises[0].done(function(response) {\n\n                                            response.config = config;\n                                            templates.render('block_msmycourses2/menu', response).then(function (html, js) {\n                                                templates.replaceNode('#inst'+blockid+' .msmycourses_wrapper', html, js);\n                                            }).fail(function(ex){log.debug(ex);});\n                               }).fail(function(e) {\n                               log.debug(e);\n                                });\n\n              return false; //extra, and to make sure the function has consistent return points\n};\n\nconst menu_savestate = (item,id) => {\n\n          var current_view = 0;\n          var switch_view = item.closest('.msmycourses_wrapper').find('.switch_view');\n\n          if(switch_view.data('currentview') == 1) {\n                    current_view = 1;\n          }\n\n          var promises = ajax.call([\n          {\n                methodname: 'block_msmycourses2_savestates_menu',\n                args: {\n                          blockid: id,\n                          category_id: item.data('id'),\n                          current_view: current_view,\n                }\n          }\n          ]);\n\n          promises[0].done(function() {\n          }).fail(notification.exception);\n};"],"names":["id","on","menu_open","this","menu_savestate","item","blockid","current_view","closest","find","data","ajax","call","methodname","args","category_id","done","response","config","render","then","html","js","replaceNode","fail","ex","debug","e","notification","exception"],"mappings":"6mBAOoB,SAACA,wBACb,WAAWC,GAAG,QAAQ,QAAQD,GAAG,uCAAuC,kBACpEE,WAAU,mBAAEC,MAAOH,IACnBI,gBAAe,mBAAED,MAAMH,KAChB,UAIbE,UAAY,SAACG,KAAMC,aAELC,aAAe,SAGmB,GAFpBF,KAAKG,QAAQ,wBAAwBC,KAAK,gBAE7CC,KAAK,iBAChBH,aAAe,GAGJI,cAAKC,KAAK,CACT,CACMC,WAAY,wCACZC,KAAM,CACER,QAASA,QACTS,YAAaV,KAAKK,KAAK,MACvBH,aAAcA,iBAKnB,GAAGS,MAAK,SAASC,UAEdA,SAASC,OAASA,mCACRC,OAAO,0BAA2BF,UAAUG,MAAK,SAAUC,KAAMC,uBAC7DC,YAAY,QAAQjB,QAAQ,wBAAyBe,KAAMC,OACtEE,MAAK,SAASC,iBAAQC,MAAMD,UACzCD,MAAK,SAASG,gBACbD,MAAMC,OAGpB,GAGfvB,eAAiB,SAACC,KAAKL,QAEfO,aAAe,EAGmB,GAFpBF,KAAKG,QAAQ,wBAAwBC,KAAK,gBAE7CC,KAAK,iBACVH,aAAe,GAGVI,cAAKC,KAAK,CACzB,CACMC,WAAY,qCACZC,KAAM,CACIR,QAASN,GACTe,YAAaV,KAAKK,KAAK,MACvBH,aAAcA,iBAKrB,GAAGS,MAAK,eACdQ,KAAKI,sBAAaC"}